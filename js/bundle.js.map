{"version":3,"sources":["webpack/bootstrap 0756d680bd41c67366e7","./js/main.js","./js/view.js","./js/board.js","./js/bike.js","./js/coord.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA;AACA,EAAC;;;;;;;ACLD;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,uBAAsB;AACtB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA,kBAAiB,qBAAqB;AACtC;AACA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC/EA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;ACtBA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,8BAA8B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA,6BAA4B;AAC5B;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjJA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0756d680bd41c67366e7\n **/","var View = require('./view');\n\n$(function () {\n  var rootEl = $('.tron-game');\n  new View(rootEl);\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/main.js\n ** module id = 0\n ** module chunks = 0\n **/","var Board = require('./board');\n\nvar View = function($el) {\n  this.$el = $el;\n\n  this.board = new Board(100, 70);\n  this.setupGrid();\n\n  this.intervalId = window.setInterval(\n    this.step.bind(this),\n    25 //milliseconds; change if necessary\n  );\n\n  $(window).on(\"keydown\", this.handleKeyEvent.bind(this));\n};\n\nView.KEYS = {\n  38: \"N\",\n  39: \"E\",\n  40: \"S\",\n  37: \"W\"\n};\n\nView.prototype.handleKeyEvent = function (event) {\n  if (View.KEYS[event.keyCode]) {\n    this.board.player1.turn(View.KEYS[event.keyCode]);\n  } else {\n    // ignore other keys, or maybe have pause button?\n  }\n};\n\nView.prototype.setupGrid = function () {\n  var html = \"\";\n\n  for (var i = 0; i < this.board.dimY; i++) {\n    html += \"<ul>\";\n    for (var j = 0; j < this.board.dimX; j++) {\n      html += \"<li></li>\";\n    }\n    html += \"</ul>\";\n  }\n\n  this.$el.html(html);\n  this.$li = this.$el.find(\"li\");\n};\n\nView.prototype.step = function () {\n  if (this.board.player1.alive && this.board.computer.alive) {\n    this.board.player1.move();\n    this.board.computer.computerMove();\n    this.render();\n  } else {\n    // TODO display winner with CSS instead of alert\n    // alert(\"come on man\");\n    window.clearInterval(this.intervalId);\n  }\n};\n\nView.prototype.render = function () {\n  this.updateClasses(this.board.player1.segments, \"player\");\n  this.updateClasses(this.board.computer.segments, \"computer\");\n};\n\nView.prototype.updateClasses = function (coords, className) {\n  // find the index of each coord that will be in the jQuery object\n  var self = this;\n  coords.forEach(function(coord) {\n    var flatCoord = (coord.i * self.board.dimX) + coord.j;\n    self.$li.eq(flatCoord).addClass(className);\n  });\n};\n\n// TODO\n// View.prototype.checkWinner = function() {\n//   if (!this.board.player1.alive) {\n//\n//   }\n// };\n\nmodule.exports = View;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/view.js\n ** module id = 1\n ** module chunks = 0\n **/","var Bike = require(\"./bike\");\n\nvar Board = function (dimX, dimY) {\n  this.dimX = dimX;\n  this.dimY = dimY;\n\n  // enter start coordinates as an array - [i, j]\n  var player1StartPos = [Math.floor(dimY/2), Math.floor(3*dimX/4)] ;\n  this.player1 = new Bike(this, player1StartPos, \"W\");\n\n  var computerStartPos = [Math.floor(dimY/2), Math.floor(dimX/4)];\n  this.computer = new Bike(this, computerStartPos, \"E\");\n\n  this.player1.opponent = this.computer;\n  this.computer.opponent = this.player1;\n};\n\nBoard.prototype.validPosition = function (coord) {\n  return (coord.i >= 0 && coord.i < this.dimY) &&\n         (coord.j >= 0 && coord.j < this.dimX);\n};\n\nmodule.exports = Board;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/board.js\n ** module id = 2\n ** module chunks = 0\n **/","var Coord = require('./coord');\n\nvar Bike = function (board, startPos, dir) {\n  this.dir = dir;\n  this.turning = false;\n  this.board = board;\n  this.alive = true;\n  this.opponent = null;\n\n  var start = new Coord(startPos[0], startPos[1]);\n  this.segments = [start];\n};\n\nBike.DIFFS = {\n  \"N\": new Coord(-1, 0),\n  \"E\": new Coord(0, 1),\n  \"S\": new Coord(1, 0),\n  \"W\": new Coord(0, -1)\n};\n\nBike.prototype.isOccupying = function (coord) {\n  var result = false;\n  this.segments.forEach(function (segment) {\n    if (segment.equals(coord)) {\n      result = true;\n    }\n  });\n  return result;\n};\n\nBike.prototype.head = function () {\n  return this.segments[this.segments.length - 1];\n};\n\nBike.prototype.isValid = function(coord) {\n  // check boundaries on board\n  if (!this.board.validPosition(coord)) {\n    return false;\n  }\n  // check if bike runs into itself\n  for (var i = 0; i < this.segments.length - 1; i++) {\n    if (this.segments[i].equals(coord)) {\n      return false;\n    }\n  }\n  // check if bike runs into opponent\n  if (this.opponent.isOccupying(coord)) {\n    return false;\n  }\n  return true;\n};\n\nBike.prototype.move = function () {\n  var nextCoord = this.head().plus(Bike.DIFFS[this.dir]);\n  this.segments.push(nextCoord);\n\n  this.turning = false;\n  if (!this.isValid(nextCoord) ) {\n    this.alive = false;\n  }\n};\n\nBike.prototype.turn = function (dir) {\n  // don't allow user to turn directly around in opposite direction\n  if (Bike.DIFFS[dir].isOpposite(Bike.DIFFS[this.dir]) || this.turning) {\n    return;\n  } else {\n    this.turning = true;\n    this.dir = dir;\n  }\n};\n\n// for AI only\nBike.prototype.computerChangeDir = function () {\n  var turningDirs;\n  if (this.dir === \"N\" || this.dir === \"S\") {\n    turningDirs = [\"W\", \"E\"];\n  } else {\n    turningDirs = [\"N\", \"S\"];\n  }\n\n  // decide the turn to make based on the length of the open path\n  var firstDir = turningDirs[0];\n  var firstDirPathCount = 0; //for counting the open spaces on this path\n  var firstDirCoord = this.head().plus(Bike.DIFFS[firstDir]);\n\n  while (this.isValid(firstDirCoord)) {\n    firstDirPathCount += 1;\n    // go to next coord and see if it is free\n    firstDirCoord = firstDirCoord.plus(Bike.DIFFS[firstDir]);\n  }\n\n  var secondDir = turningDirs[1];\n  var secondDirPathCount = 0;\n  var secondDirCoord = this.head().plus(Bike.DIFFS[secondDir]);\n\n  while (this.isValid(secondDirCoord)) {\n    secondDirPathCount += 1;\n    secondDirCoord = secondDirCoord.plus(Bike.DIFFS[secondDir]);\n  }\n\n  // go with the direction that has the clearest path\n  if (firstDirPathCount > secondDirPathCount) {\n    this.dir = firstDir;\n  } else {\n    this.dir = secondDir;\n  }\n};\n\nBike.prototype.computerMove = function () {\n  var nextCoord = this.head().plus(Bike.DIFFS[this.dir]);\n\n  // make a random turn once in awhile to seem more human-like\n  if (Math.random() > 0.98) {\n    this.computerChangeDir();\n  }\n\n  if (this.isValid(nextCoord)) {\n    this.segments.push(nextCoord);\n  } else {\n    this.computerChangeDir();\n    nextCoord = this.head().plus(Bike.DIFFS[this.dir]);\n    this.segments.push(nextCoord);\n  }\n\n  // if still invalid the computer lost\n  if (!this.isValid(nextCoord)) {\n    this.alive = false;\n  }\n};\n\nmodule.exports = Bike;\n\n\n// Old, possibly use for easy level\n// Bike.prototype.computerChangeDir = function () {\n//   var turningDirs;\n//   if (this.dir === \"N\" || this.dir === \"S\") {\n//     turningDirs = [\"W\", \"E\"];\n//   } else {\n//     turningDirs = [\"N\", \"S\"];\n//   }\n//\n//   var randomIdx = Math.floor((Math.random()*2));\n//   this.dir = turningDirs[randomIdx];\n// };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/bike.js\n ** module id = 3\n ** module chunks = 0\n **/","var Coord = function (i, j) {\n  this.i = i;\n  this.j = j;\n};\n\nCoord.prototype.equals = function (coord2) {\n  return (this.i === coord2.i) && (this.j === coord2.j);\n};\n\nCoord.prototype.plus = function (coord2) {\n  // use to find new position of the bike on each move\n  return new Coord(this.i + coord2.i, this.j + coord2.j);\n};\n\nCoord.prototype.isOpposite = function (coord2) {\n  // use to prevent bike from turning around on itself\n  return (this.i === (-1 * coord2.i) && this.j === (-1 * coord2.j));\n};\n\nmodule.exports = Coord;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/coord.js\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}